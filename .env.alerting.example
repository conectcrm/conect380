# ==============================================================================
# OBSERVABILIDADE - ALERTING
# ==============================================================================
# Configurações para Alertmanager, Prometheus e Grafana

# ========================================
# Slack Webhooks
# ========================================
# Criar webhooks em: https://api.slack.com/apps → Incoming Webhooks
# Recomendado: Criar um webhook por canal para controle granular

# Canal para alertas CRÍTICOS (APIDown, DatabaseDown, etc)
SLACK_WEBHOOK_CRITICAL=https://hooks.slack.com/services/YOUR/WEBHOOK/CRITICAL

# Canal para alertas WARNING (HighCPU, SlowQueries, etc)
SLACK_WEBHOOK_WARNING=https://hooks.slack.com/services/YOUR/WEBHOOK/WARNING

# Canal para alertas de SLO (SLOViolation, ErrorBudgetExhaustion)
SLACK_WEBHOOK_SLO=https://hooks.slack.com/services/YOUR/WEBHOOK/SLO

# Canal para alertas INFO (TicketQueueSize, etc)
SLACK_WEBHOOK_INFO=https://hooks.slack.com/services/YOUR/WEBHOOK/INFO

# ========================================
# SMTP Configuration (Email Alerts)
# ========================================
# Recomendado: Usar App Password do Gmail (não senha normal)
# Criar em: https://myaccount.google.com/apppasswords

SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USERNAME=alerts@conectcrm.com
SMTP_PASSWORD=your-smtp-app-password-here
SMTP_FROM=ConectCRM Alerts <alerts@conectcrm.com>
SMTP_TO=oncall@conectcrm.com,sre-team@conectcrm.com

# ========================================
# PagerDuty Integration (Optional)
# ========================================
# Obter em: PagerDuty → Services → Integrations → Add Integration → Events API v2
PAGERDUTY_SERVICE_KEY=your-pagerduty-integration-key-here
PAGERDUTY_ROUTING_KEY=your-routing-key-here

# ========================================
# Twilio for SMS Alerts (Optional)
# ========================================
# Para alertas críticos via SMS durante madrugada
TWILIO_ACCOUNT_SID=your-account-sid
TWILIO_AUTH_TOKEN=your-auth-token
TWILIO_FROM_NUMBER=+5511999999999
TWILIO_TO_ONCALL=+5511988888888
TWILIO_TO_BACKUP=+5511977777777

# ========================================
# Custom Webhook (Optional)
# ========================================
# URL customizada para integração com sistemas internos
WEBHOOK_CUSTOM_URL=https://your-internal-system.com/alerts
WEBHOOK_CUSTOM_AUTH_TOKEN=your-bearer-token

# ========================================
# Alert Thresholds (Customize per environment)
# ========================================
# Ajuste estes valores baseado no perfil da sua aplicação

# CPU Usage (%)
ALERT_THRESHOLD_CPU=80

# Memory Usage (%)
ALERT_THRESHOLD_MEMORY=85

# Disk Space Usage (%)
ALERT_THRESHOLD_DISK=90

# HTTP Error Rate (%)
ALERT_THRESHOLD_ERROR_RATE=5

# Latency P95 (milliseconds)
ALERT_THRESHOLD_LATENCY_P95=2000

# Latency P99 (milliseconds)
ALERT_THRESHOLD_LATENCY_P99=5000

# Database Connection Pool (%)
ALERT_THRESHOLD_DB_POOL=90

# Queue Size (absolute number)
ALERT_THRESHOLD_QUEUE_SIZE=100

# ========================================
GRAFANA_ADMIN_USER=admin
GRAFANA_ADMIN_PASSWORD=admin123

# ==============================================================================
# OBSERVABILIDADE - MÉTRICAS
# ==============================================================================

# Prometheus Retention (quanto tempo guardar métricas)
PROMETHEUS_RETENTION_TIME=15d

# Alertmanager External URL (para links em notificações)
ALERTMANAGER_EXTERNAL_URL=http://localhost:9093

# ==============================================================================
# OBSERVABILIDADE - CANAIS DO SLACK
# ==============================================================================
# Criar estes canais no Slack antes de usar:
# - #alerts-critical
# - #alerts-warning
# - #alerts-info
# - #slo-violations

# ==============================================================================
# OBSERVABILIDADE - PAGERDUTY
# ==============================================================================
# Escalação configurada:
# 1. On-call engineer (imediato)
# 2. Tech Lead (após 5min sem resposta)
# 3. CTO (após 10min sem resposta)
