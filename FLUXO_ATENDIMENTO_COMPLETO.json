{
  "nome": "Atendimento Completo - Cadastro e Triagem",
  "descricao": "Fluxo automÃ¡tico que verifica cadastro, coleta dados se necessÃ¡rio e direciona para atendimento",
  "ativo": true,
  "estrutura": {
    "versao": "2.0",
    "etapas": [
      {
        "id": "inicio",
        "tipo": "inicio",
        "config": {
          "mensagemBoasVindas": "OlÃ¡! ğŸ‘‹ Bem-vindo ao atendimento da nossa empresa. \n\nPor favor, aguarde enquanto verificamos seus dados...",
          "delay": 1000
        },
        "proximaEtapa": "verificar_cadastro"
      },
      {
        "id": "verificar_cadastro",
        "tipo": "condicao",
        "config": {
          "variavel": "contato.cadastrado",
          "operador": "existe",
          "descricao": "Verifica se o contato jÃ¡ estÃ¡ cadastrado no sistema"
        },
        "proximaEtapaVerdadeiro": "boas_vindas_cadastrado",
        "proximaEtapaFalso": "solicitar_primeiro_nome"
      },
      {
        "id": "boas_vindas_cadastrado",
        "tipo": "mensagem",
        "config": {
          "mensagem": "OlÃ¡ {{contato.nome}}! ğŸ˜Š\n\nQue bom ter vocÃª de volta! Como posso ajudÃ¡-lo hoje?",
          "delay": 500
        },
        "proximaEtapa": "menu_atendimento"
      },
      {
        "id": "solicitar_primeiro_nome",
        "tipo": "mensagem",
        "config": {
          "mensagem": "Vejo que Ã© seu primeiro contato conosco! ğŸ‰\n\nPara oferecer um atendimento personalizado, preciso de algumas informaÃ§Ãµes.",
          "delay": 1000
        },
        "proximaEtapa": "coletar_primeiro_nome"
      },
      {
        "id": "coletar_primeiro_nome",
        "tipo": "pergunta",
        "config": {
          "pergunta": "Qual Ã© o seu *primeiro nome*? ğŸ“",
          "variavel": "contato.primeiroNome",
          "validacao": {
            "tipo": "texto",
            "minimo": 2,
            "mensagemErro": "Por favor, digite um nome vÃ¡lido (mÃ­nimo 2 caracteres)."
          }
        },
        "proximaEtapa": "coletar_sobrenome"
      },
      {
        "id": "coletar_sobrenome",
        "tipo": "pergunta",
        "config": {
          "pergunta": "Obrigado, {{contato.primeiroNome}}! ğŸ‘\n\nAgora, qual Ã© o seu *sobrenome*?",
          "variavel": "contato.sobrenome",
          "validacao": {
            "tipo": "texto",
            "minimo": 2,
            "mensagemErro": "Por favor, digite um sobrenome vÃ¡lido (mÃ­nimo 2 caracteres)."
          }
        },
        "proximaEtapa": "coletar_email"
      },
      {
        "id": "coletar_email",
        "tipo": "pergunta",
        "config": {
          "pergunta": "Perfeito! Agora preciso do seu *e-mail* para contato. ğŸ“§\n\n_(Digite um e-mail vÃ¡lido)_",
          "variavel": "contato.email",
          "validacao": {
            "tipo": "email",
            "mensagemErro": "Por favor, digite um e-mail vÃ¡lido (exemplo: seunome@empresa.com)."
          }
        },
        "proximaEtapa": "coletar_empresa"
      },
      {
        "id": "coletar_empresa",
        "tipo": "pergunta",
        "config": {
          "pergunta": "Qual Ã© o nome da sua *empresa*? ğŸ¢",
          "variavel": "contato.empresa",
          "validacao": {
            "tipo": "texto",
            "minimo": 2,
            "opcional": true,
            "mensagemErro": "Digite o nome da empresa ou 'nÃ£o tenho' para pular."
          }
        },
        "proximaEtapa": "confirmar_dados"
      },
      {
        "id": "confirmar_dados",
        "tipo": "mensagem",
        "config": {
          "mensagem": "âœ… *Dados recebidos:*\n\nğŸ‘¤ Nome: {{contato.primeiroNome}} {{contato.sobrenome}}\nğŸ“§ E-mail: {{contato.email}}\nğŸ¢ Empresa: {{contato.empresa}}\n\n_Salvando suas informaÃ§Ãµes..._",
          "delay": 2000
        },
        "proximaEtapa": "salvar_contato"
      },
      {
        "id": "salvar_contato",
        "tipo": "acao",
        "config": {
          "acao": "salvar_contato",
          "parametros": {
            "nome": "{{contato.primeiroNome}} {{contato.sobrenome}}",
            "email": "{{contato.email}}",
            "empresa": "{{contato.empresa}}",
            "telefone": "{{contato.telefone}}",
            "origem": "whatsapp_bot"
          }
        },
        "proximaEtapa": "confirmacao_cadastro"
      },
      {
        "id": "confirmacao_cadastro",
        "tipo": "mensagem",
        "config": {
          "mensagem": "ğŸ‰ *Cadastro realizado com sucesso!*\n\nAgora vocÃª faz parte da nossa base de clientes. Vamos prosseguir com seu atendimento!",
          "delay": 1000
        },
        "proximaEtapa": "menu_atendimento"
      },
      {
        "id": "menu_atendimento",
        "tipo": "menu",
        "config": {
          "mensagem": "ğŸ“‹ *Como posso ajudÃ¡-lo hoje?*\n\nEscolha uma das opÃ§Ãµes abaixo:",
          "opcoes": [
            {
              "numero": "1",
              "texto": "ğŸ’¼ Comercial - Vendas e OrÃ§amentos",
              "proximaEtapa": "transferir_comercial"
            },
            {
              "numero": "2",
              "texto": "ğŸ› ï¸ Suporte TÃ©cnico",
              "proximaEtapa": "transferir_suporte"
            },
            {
              "numero": "3",
              "texto": "ğŸ’° Financeiro - Pagamentos e Faturas",
              "proximaEtapa": "transferir_financeiro"
            },
            {
              "numero": "4",
              "texto": "â“ Outros Assuntos",
              "proximaEtapa": "transferir_geral"
            }
          ],
          "mensagemOpcaoInvalida": "OpÃ§Ã£o invÃ¡lida. Por favor, digite um nÃºmero de 1 a 4.",
          "tentativasMaximas": 3
        }
      },
      {
        "id": "transferir_comercial",
        "tipo": "mensagem",
        "config": {
          "mensagem": "ğŸ’¼ *Ãrea Comercial*\n\nVocÃª serÃ¡ transferido para um consultor de vendas. Aguarde um momento...",
          "delay": 1500
        },
        "proximaEtapa": "acao_transferir_comercial"
      },
      {
        "id": "acao_transferir_comercial",
        "tipo": "acao",
        "config": {
          "acao": "transferir_para_nucleo",
          "parametros": {
            "nucleoNome": "Comercial",
            "mensagem": "Cliente solicitou atendimento comercial",
            "prioridade": "media"
          }
        },
        "proximaEtapa": "fim"
      },
      {
        "id": "transferir_suporte",
        "tipo": "mensagem",
        "config": {
          "mensagem": "ğŸ› ï¸ *Suporte TÃ©cnico*\n\nVocÃª serÃ¡ conectado com um tÃ©cnico especializado. Aguarde...",
          "delay": 1500
        },
        "proximaEtapa": "acao_transferir_suporte"
      },
      {
        "id": "acao_transferir_suporte",
        "tipo": "acao",
        "config": {
          "acao": "transferir_para_nucleo",
          "parametros": {
            "nucleoNome": "Suporte",
            "mensagem": "Cliente solicitou suporte tÃ©cnico",
            "prioridade": "alta"
          }
        },
        "proximaEtapa": "fim"
      },
      {
        "id": "transferir_financeiro",
        "tipo": "mensagem",
        "config": {
          "mensagem": "ğŸ’° *Setor Financeiro*\n\nVocÃª serÃ¡ atendido por nossa equipe financeira. Um momento...",
          "delay": 1500
        },
        "proximaEtapa": "acao_transferir_financeiro"
      },
      {
        "id": "acao_transferir_financeiro",
        "tipo": "acao",
        "config": {
          "acao": "transferir_para_nucleo",
          "parametros": {
            "nucleoNome": "Financeiro",
            "mensagem": "Cliente solicitou atendimento financeiro",
            "prioridade": "media"
          }
        },
        "proximaEtapa": "fim"
      },
      {
        "id": "transferir_geral",
        "tipo": "mensagem",
        "config": {
          "mensagem": "â“ *Atendimento Geral*\n\nVocÃª serÃ¡ direcionado para um atendente. Aguarde um momento...",
          "delay": 1500
        },
        "proximaEtapa": "acao_transferir_geral"
      },
      {
        "id": "acao_transferir_geral",
        "tipo": "acao",
        "config": {
          "acao": "transferir_para_nucleo",
          "parametros": {
            "nucleoNome": "Atendimento",
            "mensagem": "Cliente solicitou atendimento geral",
            "prioridade": "normal"
          }
        },
        "proximaEtapa": "fim"
      },
      {
        "id": "fim",
        "tipo": "fim",
        "config": {
          "mensagemFinal": "VocÃª estÃ¡ sendo transferido para um atendente humano. Obrigado! ğŸ™"
        }
      }
    ]
  }
}