<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Teste API - Conecta CRM</title>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
</head>
<body>
    <h1>Teste da API - Conecta CRM</h1>
    <div id="results"></div>

    <script>
        const API_BASE_URL = 'http://localhost:3001';
        
        // Fun√ß√£o para testar estat√≠sticas
        async function testarEstatisticas() {
            try {
                console.log('üîÑ Testando endpoint de estat√≠sticas...');
                const response = await axios.get(`${API_BASE_URL}/users/estatisticas`, {
                    headers: {
                        'Authorization': `Bearer ${localStorage.getItem('auth_token') || 'test-token'}`
                    }
                });
                console.log('‚úÖ Estat√≠sticas:', response.data);
                return response.data;
            } catch (error) {
                console.error('‚ùå Erro nas estat√≠sticas:', error);
                return null;
            }
        }

        // Fun√ß√£o para testar atividades
        async function testarAtividades() {
            try {
                console.log('üîÑ Testando endpoint de atividades...');
                const response = await axios.get(`${API_BASE_URL}/users/atividades`, {
                    headers: {
                        'Authorization': `Bearer ${localStorage.getItem('auth_token') || 'test-token'}`
                    }
                });
                console.log('‚úÖ Atividades:', response.data);
                return response.data;
            } catch (error) {
                console.error('‚ùå Erro nas atividades:', error);
                return null;
            }
        }

        // Fun√ß√£o para testar usu√°rios
        async function testarUsuarios() {
            try {
                console.log('üîÑ Testando endpoint de usu√°rios...');
                const response = await axios.get(`${API_BASE_URL}/users`, {
                    headers: {
                        'Authorization': `Bearer ${localStorage.getItem('auth_token') || 'test-token'}`
                    }
                });
                console.log('‚úÖ Usu√°rios:', response.data);
                return response.data;
            } catch (error) {
                console.error('‚ùå Erro nos usu√°rios:', error);
                return null;
            }
        }

        // Executar testes
        async function executarTestes() {
            console.log('üöÄ Iniciando testes da API...');
            
            const estatisticas = await testarEstatisticas();
            const atividades = await testarAtividades();
            const usuarios = await testarUsuarios();
            
            // Exibir resultados na p√°gina
            document.getElementById('results').innerHTML = `
                <h2>Resultados dos Testes:</h2>
                <h3>Estat√≠sticas:</h3>
                <pre>${JSON.stringify(estatisticas, null, 2)}</pre>
                <h3>Atividades:</h3>
                <pre>${JSON.stringify(atividades, null, 2)}</pre>
                <h3>Usu√°rios:</h3>
                <pre>${JSON.stringify(usuarios, null, 2)}</pre>
            `;
        }

        // Executar quando a p√°gina carregar
        window.onload = executarTestes;
    </script>
</body>
</html>
